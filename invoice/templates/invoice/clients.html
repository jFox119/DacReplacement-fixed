{% extends "base.html" %}

{% block content %}
<div class="drawer drawer-open">
  <input id="my-drawer" type="checkbox" class="drawer-toggle " />
  <div class="drawer-content p-4">
    <!-- Page content here -->
    <h1 class="text-2xl underline text-accent">Client List</h1>
    <div class="p-4 text-white">
      <div class="overflow-x-auto rounded-box border border-base-content/5 bg-base-100">
        <table class="table">
          <thead>
            <tr>
              <th>First Name</th>
              <th>Last Name</th>
              <th>Address</th>
            </tr>
          </thead>
          <tbody id = "client_table" hx-trigger="load" hx-get="{% url 'client_list' %}" hx-target="this">
              <tr>
                  <td role="status">
                  <span class="loading loading-spinner text-success">Loading...</span>
                  </td>
              </tr>
          </tbody>
        </table>
      </div>
      <button  hx-get="{% url 'add_client' %}" hx-target="#dialog" class="btn btn-success btn-sm">
          Add Client
        </button>
    </div>

    <!-- Placeholder for the modal -->
    <div id="modal" class="modal fade">
      <div id="dialog" class="modal-dialog" hx-target="this"></div>
    </div>

    <!-- Empty toast to show the message -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
      <div id="toast" class="toast align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
          <div id="toast-body" class="toast-body"></div>
          <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
      </div>
    </div>

  </div> 
  <div class="drawer-side menu p-4 min-h-full bg-base-200 text-base-content">
    <label for="my-drawer" aria-label="close sidebar" class="drawer-overlay"></label>
    <label class="input input-bordered flex items-center gap-2">
      <svg class="h-[1em] opacity-50" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <g
          stroke-linejoin="round"
          stroke-linecap="round"
          stroke-width="2.5"
          fill="none"
          stroke="currentColor"
        >
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.3-4.3"></path>
        </g>
      </svg>
      <input type="search" class="grow" placeholder="Search" />
    </label>
  </div>
</div>
{% endblock %}

